# --- Identity ---
# The private key for the NEAR solver account (ed25519)
SOLVER_PRIVATE_KEY=ed25519:YOUR_PRIVATE_KEY_HERE
# The NEAR account ID for the solver
SOLVER_ID=solver.near

# The private key for the Hyperliquid account (Ethereum-style 0x...)
HYPERLIQUID_PRIVATE_KEY=0xYOUR_ETH_PRIVATE_KEY_HERE
# The public address for the Hyperliquid account
HYPERLIQUID_WALLET_ADDRESS=0xYOUR_WALLET_ADDRESS_HERE

# --- Connectivity ---
# Connection to the Solver Bus Relay
SOLVER_BUS_WS_URL=wss://solver-relay-v2.chaindefuser.com/ws
SOLVER_BUS_RPC_URL=https://solver-relay-v2.chaindefuser.com/rpc
# Authorization key for the Solver Bus (if required)
RELAY_AUTH_KEY=your_relay_auth_key_here

# NEAR RPC Node - single URL (backwards compatible)
NEAR_RPC_URL=https://free.rpc.fastnear.com
# Or use multiple RPCs for automatic failover (comma-separated, priority order)
# NEAR_RPC_URLS=https://free.rpc.fastnear.com,https://near.lava.build,https://near.drpc.org
NEAR_NETWORK_ID=mainnet
INTENTS_CONTRACT_ID=intents.near

# --- Hyperliquid ---
# Set to 'false' for Testnet
HYPERLIQUID_MAINNET=true

# --- Strategy Constraints ---
# Max amount of BTC to hold in inventory before stopping BUY quotes
MAX_BTC_INVENTORY=5.0
# Min USDT to keep on NEAR (stop buying if below)
MIN_USDT_RESERVE=2000.0

# --- Spread Configuration ---
# Static spread in basis points (used when DYNAMIC_SPREAD_ENABLED=false)
TARGET_SPREAD_BIPS=10

# Dynamic spread adjusts based on perp/spot basis for consistent profitability
DYNAMIC_SPREAD_ENABLED=false
# Base spread when dynamic is enabled (this is your competitive rate)
BASE_SPREAD_BIPS=5
# Maximum spread cap (prevents excessive widening)
MAX_SPREAD_BIPS=50

# --- Spot Price Feed (for dynamic spread) ---
# Primary source: 'coinbase' or 'binance'
SPOT_PRICE_SOURCE=coinbase
# Update interval in milliseconds
SPOT_PRICE_UPDATE_INTERVAL_MS=10000
# Enable fallback to alternate source if primary fails
SPOT_PRICE_FALLBACK=true

# --- Risk Management ---
# Stop quoting if Hyperliquid Margin falls below this USDC amount (HL uses USDC for margin)
MIN_MARGIN_THRESHOLD=1000.0
# Stop quoting BUYS if hourly funding rate is worse than this (e.g. -0.05%)
MIN_HOURLY_FUNDING_RATE=-0.0005
# Alert if inventory drift (Spot vs Perp) exceeds this BTC amount
DRIFT_THRESHOLD_BTC=0.001

# --- Order Constraints ---
# Minimum trade size in BTC (Hyperliquid minimum is 0.001)
MIN_TRADE_SIZE_BTC=0.001
# Maximum trade size in BTC (default: 1.0)
MAX_TRADE_SIZE_BTC=1.0

# --- Hedge Execution ---
# Slippage tolerance for hedge orders in basis points (default: 30 = 0.3%)
HEDGE_SLIPPAGE_BPS=30
# Max orderbook age in ms before rejecting quotes (default: 2000)
MAX_ORDERBOOK_AGE_MS=2000
# Circuit breaker - set to 'false' to disable hedging (for debugging/testing)
# When disabled, settlements will be logged but no hedge orders placed on Hyperliquid
HEDGING_ENABLED=true

# --- Observability ---
# Use this when not deploying with Railway. This is set automatically by Railway.
# API_PORT=3000

# Directory for persistent logs (trades, positions).
# For Railway: mount a volume and set this to the mount path (e.g., /data/logs)
# LOGS_DIR=/data/logs

# --- Asset Configuration ---
# The solver accepts all BTC types by default: BTC (spot), wBTC (Eth), cbBTC (Base)
# Supported BTC tokens:
#   - btc.omft.near (Native BTC)
#   - eth-0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.omft.near (wBTC from Ethereum)
#   - base-0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf.omft.near (cbBTC from Base)
# 
# USDT override (optional):
# USDT_TOKEN_ID=usdt.tether-token.near
